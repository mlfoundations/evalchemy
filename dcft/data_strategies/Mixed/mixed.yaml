  name: mix_banana_ray
  output_ids: ['mix_banana']
  operators:
    - id: mix_banana
      input_ids: ['load_evol_instruct', 'shp_dag']
      config:
        type: mix
    - id: load_evol_instruct
      input_ids: []
      config:
        type: load_preexisting
        framework_name: evol_instruct
    - id: shp_dag
      input_ids: []
      config:
        type: dag
        dag:
          name: shp_processing
          operators:
            - id: load_shp
              config:
                type: hf_source
                dataset: stanfordnlp/SHP
                split: train
                columns: 
                  - history
                  - human_ref_A
                num_truncate: 5

            - id: instruction_generation
              config:
                type: function
                sharded: true
                function: data_strategies.WizardLM.utils.instruction_generation
                function_config:
                  input_column: history
                  output_column: evol_instruction
            
            - id: dedup_evol_instructions
              config:
                type: function
                function: data_strategies.WizardLM.utils.dedup
                function_config:
                  input_column: evol_instruction

            - id: annotate
              config:
                type: function
                sharded: true
                function: data_strategies.WizardLM.utils.annotate
                function_config:
                  input_column: evol_instruction
                  output_column: completion

            - id: rename_prompt
              config:
                type: function
                sharded: true
                function: data_strategies.WizardLM.utils.force_rename_column
                function_config:
                  old_name: evol_instruction
                  new_name: prompt

            - id: remove_other_columns
              config:
                type: function
                sharded: true
                function: data_strategies.WizardLM.utils.remove_other_columns
                function_config:
                  columns_to_keep:
                    - prompt
                    - completion
